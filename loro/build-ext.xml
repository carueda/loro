<?xml version="1.0" encoding="iso-8859-1" ?>

<!--
    Build para extensiones.
	Aqui se carga la taskdef "loroc" (que build.xml debe crear primero).
	
	** Debe invocarse a través del build.xml principal.
-->

<project name="Loro" default="ext">

	<taskdef name="loroc" classname="loro.misc.ant.LoroCompilerTask"
	 classpath="${build}/classes"/>
	
    <target name="ext" depends="mat.lar, entsal.lar"
     description="Hace mat.lar, entsal.lar">
    </target>

	<!-- mat .................................................. -->
    <target name="mat.lar" depends="compile-mat"
     description="Hace extensión mat.lar">
		<mkdir dir="${build}/ext/mat"/>
		<copy todir="${build}/ext/mat">
			<fileset dir="${src}/ext/mat"/> 
		</copy>
        <zip zipfile="${dist}/ext/mat.lar" 
		 basedir="${build}/ext/mat"
		/>
    </target>

    <target name="compile-mat">
        <loroc srcdir="${src}/ext/mat" destdir="${build}/ext/mat" includes="loroI/mat/**/*.loro"
		/>
    </target>


	<!-- entsal .................................................. -->
    <target name="entsal.lar" depends="compile-entsal"
     description="Hace extensión entsal.lar">
		<mkdir dir="${build}/ext/entsal"/>
		<copy todir="${build}/ext/entsal">
			<fileset dir="${src}/ext/entsal"/> 
		</copy>
        <zip zipfile="${dist}/ext/entsal.lar" 
		 basedir="${build}/ext/entsal"
		/>
    </target>

    <target name="compile-entsal">
        <loroc srcdir="${src}/ext/entsal" destdir="${build}/ext/entsal" includes="loroI/entsal/**/*.loro"
		/>
    </target>

</project>
